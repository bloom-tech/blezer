{% extends "base.html" %}
{% block content %}

{% include "_partials/nav.html" %}
<div class="container-fluid">
  <div class="row">
    {% set nav = { active: status } %}
    {% include "_partials/sidebar.html" %}

    <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">
      <form action='/jobs?status={{ status }}' method='POST'>
        <button type='submit' class="btn btn-danger">Remove all</button>
      </form>

      <div id="job-list" class="table-responsive">
        <input class="search" />
        <table class="table table-hover table-sm">
          <thead>
            <tr>
              <th>JID</th>
              <th>Task</th>
              <th>Queue</th>
              <th>StartedAt</th>
              <th>%</th>
              <th></th>
            </tr>
          </thead>
          <tbody class="list">
            {% for job in jobs %}
            <tr>
              <th scope="row" class="jid">{{ job.jid }}</th>
              <td class="task">{{ job.task }}</td>
              <td class="queue">{{ job.queue }}</td>
              <td class="task">{{ job.task }}</td>
              <td class="args" title="{{ job.args | dump(2) }}"><code>{{ job.args | dump(2) | truncate(100, true) }}</code></td>
              <td class="queue">{{ job.startedAt | date }}</td>
              <td>{{ job.progress }}</td>
              <td>
                <a href="/jobs/{{ job.jid }}" class="btn btn-outline-primary btn-sm">Show</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </main>
  </div>
</div>
{% endblock %}
