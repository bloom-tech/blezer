{% extends "base.html" %}
{% block content %}
{% set nav = { active: 'jobs' } %}
{% include "_partials/nav.html" %}
<div class="container">
  <div class="row">
    <main class="col-sm-12 pt-3">
      <h2>Job: <code>{{ jid }}</code></h2>
      <div class='progress progress-striped'>
        <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: {{ progress }}%;">
        </div>
      </div>

      <form
        action='/jobs/{{ jid }}/delete'
        onsubmit="return confirm('Are you sure you want to delete this job?');"
        method='POST'
        class='mt-3 mb-3'>
        <button type='submit' class="btn btn-danger float-right mb-3">Remove</button>
      </form>

      <table class="table">
        <tbody>
          <tr>
            <td width=100>Task</td>
            <td><pre>{{ job.task }}</pre></td>
          </tr>
          <tr>
            <td>Queue</td>
            <td><pre>{{ job.queue | name }}</pre></td>
          </tr>
          {% if finishedAt %}
            <tr>
              <td>Duration</td>
              <td><pre>{{ [job.finishedAt, job.startedAt] | duration }}</pre></td>
            </tr>
          {% endif %}
          <tr>
            <td>Args</td>
            <td><pre>{{ args }}</pre></td>
          </tr>
        </tbody>
      </table>


      <ul class="terminal">
        {% for log in logs %}
        <li>{{ log }}</li>
        {% endfor %}
      </ul>
    </main>
  </div>
</div>
{% endblock %}
